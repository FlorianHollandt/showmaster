
<img src="https://dicechampionship.s3-eu-west-1.amazonaws.com/showmaster_title.png" width="70%">

This repository contains a <a href="https://github.com/jovotech/jovo-framework">Jovo framework project</a> that can be used to easily test APL directives - Especially if they contain an `ExecuteCommands` directive and are better tested on an actual device.

In the current version, this 
Here's how you set up this project in 5 simple steps:
1. Clone this repo, navigate into it, and install NPM modules (execute `npm install`)
2. Make a copy of `.env.example`, name it `.env`, and replace the value of `ASK_PROFILE` with the name of your own ASK CLI profile (this assumes you have your <a href="https://developer.amazon.com/docs/smapi/quick-start-alexa-skills-kit-command-line-interface.html">ASK CLI set up</a>)
3. Build and deploy the Skill manifest and language model: `jovo build --deploy`
4. The Jovo CLI will set up a new Skill for you. Copy and paste the new Skill's ID as the value of `SKILL_ID` in your `.env` file
5. Execute `run jovo --watch` and use either your device or the Alexa developer console's test feature to run the SKill and test your APL directives


To test your own APL directives, set up new folders in `src/display` and require your documents and commands as onject literals from according `.js` files.

# Feature demos

As this project grows, more feature demos will be added. At this point project's Skill demonstrates how a the page of a `Pager` component can be et using a `SetPage` command, and how after setting the page speech SSML and an audio file are played back using a `SpeakItem` command. For clarity, it uses only images that have the right size for the 2nd generation Echo Show, even though that's not good practice.

## Playing TTS + audio after setting a page of a pager

The document and commands of this feature can be found in `src/display/audioSpeechPager`.

Here's a breakdown of what happens:

**User**<br/>
:microphone: Alexa, open Showmaster!<br/><br/>
**Alexa**<br/>
:tv: 'Page One' image is displayed
:information_source: It's the first page of the pager, and displayed by default.<br/>
:speaker: Welcome! Please take a look at your screen. This is page one.<br/>
:information_source: This is the regular response text from `response.outputSpeech.ssml`<br/>
:tv: 'Page Two' is displayed<br/>
:information_source: This is triggered by the `SetPage` command of the `ExecuteCommands` directive<br/>
:musical_note:<br/>
:information_source: This is the `SpeakItem` command for the `myAudio` `Text` component, which is executed in parallel to `SetPage`. It uses `payload.data.properties.audioUrl` directly from the data source.<br/>
:speaker: And here is page two! Do you like it?<br/>
:information_source: This is `SpeakItem` for `mySpeechText` `Text` component, which is executed after the `myAudio` component's audio content has been played. It uses `payload.data.properties.responseSpeech`, which has been generated by the `ssmlToSpeech` transformer from the `payload.data.properties.responseSSML attribute`.

I hope you find this useful! If you have ideas on how to improve it or which other APL feartures to demo, please let me know! :)